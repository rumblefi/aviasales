(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/logo.331ee049.svg"},function(e,t,a){e.exports=a.p+"static/media/check-mark.d1a9076b.svg"},function(e,t,a){e.exports=a.p+"static/media/ticketLogo.74c86e32.svg"},function(e,t,a){e.exports=a.p+"static/media/transfer-icon.a6431ce8.svg"},function(e,t,a){e.exports=a(42)},,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),i=a.n(c),l=(a(21),a(22),a(6)),s=a(1),u=a(2),o=a(4),f=a(3),m=a(5),k=(a(23),a(24),a(25),a(11)),d=a.n(k),h=function(){return r.a.createElement("a",{href:"https://www.aviasales.ru/",target:"_blank",className:"logo"},r.a.createElement("img",{src:d.a,alt:""}))},v=function(){return r.a.createElement("header",{className:"header"},r.a.createElement(h,null))},b=(a(26),a(27),a(28),a(7)),p=a.n(b),g=function(e){var t=e.text,a=e.active,n=e.onClick,c=p()({"currency-filter":!0,"currency-filter--is-active":a});return r.a.createElement("button",{className:c,onClick:n},t)},E=[{name:"rub",text:"rub"},{name:"usd",text:"usd"},{name:"eur",text:"eur"}],F=function(e){var t=e.currencyFilter,a=e.onCurrencyFilter,n=E.map(function(e){var n=e.name,c=e.text;return r.a.createElement(g,{key:n,text:c,active:n===t,onClick:function(){return a(n)}})});return r.a.createElement("div",{className:"currency-filters"},n)},y=(a(29),function(e){var t=e.title,a=e.children;return r.a.createElement("div",{className:"filters-block"},r.a.createElement("div",{className:"filters-block__title"},t),a)}),_=a(8),T=(a(30),a(31),a(32),a(12)),C=a.n(T),N=function(e){var t=e.name,a=e.checked,n=e.onFilterAllChange,c=e.onFilterChange,i=e.onTransferFilterChange;return r.a.createElement("div",{className:"transfer-checkbox"},r.a.createElement("input",{type:"checkbox",className:"transfer-checkbox__input",name:t,checked:a,onChange:function(e){n(e),c(e),i(e)}}),r.a.createElement("div",{className:"transfer-checkbox__custom"},r.a.createElement("img",{src:C.a,alt:""})))},j=function(e){var t=e.name,a=e.labelText,n=e.checked,c=e.onFilterAllChange,i=e.onFilterChange,l=e.onTransferFilterChange;return r.a.createElement("label",{className:"transfer-label"},r.a.createElement(N,{name:t,checked:n,onFilterAllChange:c,onFilterChange:i,onTransferFilterChange:l}),r.a.createElement("span",{className:"transfer-label__title"},a))},D=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={transferFilters:[{name:"transfer_all",labelText:"\u0412\u0441\u0435",checked:!0},{name:"transfer_without",labelText:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",checked:!0},{name:"transfer_1",labelText:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",checked:!0},{name:"transfer_2",labelText:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",checked:!0},{name:"transfer_3",labelText:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",checked:!0}]},a.onFilterAllChange=function(e){var t=e.target,n=t.name,r=t.checked;"transfer_all"===n&&a.setState(function(e){var t=e.transferFilters;return{transferFilters:a.updateAllFilters(t,r)}})},a.onFilterChange=function(e){var t=e.target,n=t.name,r=t.checked;"transfer_all"!==n&&a.setState(function(e){var t=e.transferFilters,c=t.findIndex(function(e){return"transfer_all"===e.name}),i=t.findIndex(function(e){return e.name===n});return{transferFilters:[a.uncheckAllFilter(c,t)].concat(Object(l.a)(t.slice(1,i)),[a.updateOneFilter(i,t,r)],Object(l.a)(t.slice(i+1)))}})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"updateAllFilters",value:function(e,t){return e.map(function(e){return Object(_.a)({},e,{checked:t})})}},{key:"updateOneFilter",value:function(e,t,a){var n=t[e];return Object(_.a)({},n,{checked:a})}},{key:"uncheckAllFilter",value:function(e,t){var a=t[e];return Object(_.a)({},a,{checked:!1})}},{key:"render",value:function(){var e=this,t=this.state.transferFilters.map(function(t){var a=t.name,n=t.labelText,c=t.checked;return r.a.createElement(j,{key:a,name:a,labelText:n,checked:c,onFilterAllChange:e.onFilterAllChange,onFilterChange:e.onFilterChange,onTransferFilterChange:e.props.onTransferFilterChange})});return r.a.createElement("div",{className:"transfer-filters"},t)}}]),t}(r.a.Component),O=function(e){var t=e.currencyFilter,a=e.onCurrencyFilter,n=e.onTransferFilterChange;return r.a.createElement("div",{className:"filters"},r.a.createElement("div",{className:"filters__inner"},r.a.createElement(y,{title:"\u0412\u0430\u043b\u044e\u0442\u0430"},r.a.createElement(F,{currencyFilter:t,onCurrencyFilter:a})),r.a.createElement(y,{title:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"},r.a.createElement(D,{onTransferFilterChange:n}))))},x=(a(33),a(34),a(13)),w=a.n(x),A=(a(35),function(e){var t=e.modificator,a=e.children,n=p()("ticket-col",t);return r.a.createElement("div",{className:n},a)}),S=(a(36),function(e){var t=e.imgSrc;return r.a.createElement("div",{className:"ticket-logo"},r.a.createElement("img",{src:t,alt:""}))}),I=(a(37),function(e){if((e=e.toString()).length<4)return e;var t=e.slice(0,-3),a=e.slice(-3);return"".concat(t," ").concat(a)}),V=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"checkCurrency",value:function(e,t){var a=e.price_rub,n=e.price_usd,r=e.price_eur;switch(t){case"rub":return"".concat(I(a)," \u20bd");case"usd":return"".concat(I(n)," $");case"eur":return"".concat(I(r)," \u20ac");default:return"".concat(I(a)," \u20bd")}}},{key:"render",value:function(){var e=this.props,t=e.price,a=e.currencyFilterVal;return r.a.createElement("button",{type:"button",className:"ticket-button"},"\u041a\u0443\u043f\u0438\u0442\u044c",r.a.createElement("br",null),"\u0437\u0430 ",this.checkCurrency(t,a))}}]),t}(r.a.Component),L=(a(38),function(e){var t=e.data,a=t.time,n=t.city,c=t.city_name,i=t.date,l=e.modificator,s=p()("ticket-info-block",l);return r.a.createElement("div",{className:s},r.a.createElement("div",{className:"ticket-info-block__time"},a),r.a.createElement("div",{className:"ticket-info-block__city"},n,", ",c),r.a.createElement("div",{className:"ticket-info-block__date"},function(e){var t=function(e){return[(e=e.split("."))[1],e[0],e[2]].join(".")}(e),a=new Date(t),n=a.getDate(),r=["\u044f\u043d\u0432","\u0444\u0435\u0432","\u043c\u0430\u0440","\u0430\u043f\u0440","\u043c\u0430\u044f","\u0438\u044e\u043d","\u0438\u044e\u043b","\u0430\u0432\u0433","\u0441\u0435\u043d","\u043e\u043a\u0442","\u043d\u043e\u044f","\u0434\u0435\u043a"][a.getMonth()],c=a.getFullYear(),i=function(e){return["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"][e]}(a.getDay());return"".concat(n," ").concat(r," ").concat(c,", ").concat(i)}(i)))}),J=(a(39),a(14)),M=a.n(J),B=function(e){var t=e.transfersCount;return r.a.createElement("div",{className:"ticket-transfer"},r.a.createElement("div",{className:"ticket-transfer__title"},function(e){switch(e){case 0:return"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a";case 1:return"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430";case 2:return"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438";default:return"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"}}(t)),r.a.createElement("img",{src:M.a,alt:"",className:"ticket-transfer__icon"}))},Y=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.ticketData,a=t.origin,n=t.origin_name,c=t.destination,i=t.destination_name,l=t.departure_date,s=t.departure_time,u=t.arrival_date,o=t.arrival_time,f=t.stops,m=t.prices,k=e.currencyFilterVal;return r.a.createElement("div",{className:"ticket"},r.a.createElement(A,{modificator:"ticket-col--left"},r.a.createElement(S,{imgSrc:w.a}),r.a.createElement(V,{price:m,currencyFilterVal:k})),r.a.createElement(A,{modificator:"ticket-col--right"},r.a.createElement(L,{modificator:"ticket-info-block--origin",data:{time:s,city:a,city_name:n,date:l}}),r.a.createElement(B,{transfersCount:f}),r.a.createElement(L,{modificator:"ticket-block--destination",data:{time:o,city:c,city_name:i,date:u}})))}}]),t}(r.a.Component),$=function(e){var t=e.ticketsData,a=e.currencyFilterVal,n=t.map(function(e){return r.a.createElement(Y,{key:e.id,ticketData:e,currencyFilterVal:a})});return r.a.createElement("div",{className:"tickets"},n)},q=(a(40),function(e){var t=e.className;return r.a.createElement("div",{className:"preloader ".concat(t)},r.a.createElement("div",{className:"sk-folding-cube"},r.a.createElement("div",{className:"sk-cube sk-cube-1"}),r.a.createElement("div",{className:"sk-cube sk-cube-2"}),r.a.createElement("div",{className:"sk-cube sk-cube-4"}),r.a.createElement("div",{className:"sk-cube sk-cube-3"})))}),z=(a(41),function(e){var t=e.message;return r.a.createElement("div",{className:"error"},t)}),G=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={initialTicketsData:[],filtersTicketData:[],currencyFilter:"rub",isLoading:!0,error:null},a.onCurrencyFilter=function(e){a.setState({currencyFilter:e})},a.onTransferFilterChange=function(e){var t=e.target,n=t.name,r=t.checked;a.setState(function(e){var t=e.initialTicketsData,c=e.filtersTicketData;return r?{filtersTicketData:a.pushFiltersTicketData(t,c,n)}:{filtersTicketData:a.removeFilteredTickets(c,n)}})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"filterInitialTicketData",value:function(e,t,a){return[].concat(Object(l.a)(e.filter(function(e){return e.stops===a})),Object(l.a)(t))}},{key:"pushFiltersTicketData",value:function(e,t,a){switch(a){case"transfer_without":return this.filterInitialTicketData(e,t,0);case"transfer_1":return this.filterInitialTicketData(e,t,1);case"transfer_2":return this.filterInitialTicketData(e,t,2);case"transfer_3":return this.filterInitialTicketData(e,t,3);default:return e}}},{key:"filterFiltersTicketData",value:function(e,t){return Object(l.a)(e.filter(function(e){return e.stops!==t}))}},{key:"removeFilteredTickets",value:function(e,t){switch(t){case"transfer_without":return this.filterFiltersTicketData(e,0);case"transfer_1":return this.filterFiltersTicketData(e,1);case"transfer_2":return this.filterFiltersTicketData(e,2);case"transfer_3":return this.filterFiltersTicketData(e,3);default:return[]}}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){fetch("./ticketsData.json").then(function(e){if(e.ok)return e.json();throw new z("Something went wrong ...")}).then(function(t){var a=t.tickets;e.setState({initialTicketsData:a,filtersTicketData:a,isLoading:!1})}).catch(function(t){return e.setState({error:t,isLoading:!1})})},1500)}},{key:"render",value:function(){var e=this.state,t=e.currencyFilter,a=e.filtersTicketData,n=e.isLoading,c=e.error,i=n?r.a.createElement(q,null):r.a.createElement(q,{className:"is-loaded"});return c?r.a.createElement(z,{message:c.message}):r.a.createElement("div",{className:"app"},i,r.a.createElement(v,null),r.a.createElement("div",{className:"app__container"},r.a.createElement(O,{currencyFilter:t,onCurrencyFilter:this.onCurrencyFilter,onTransferFilterChange:this.onTransferFilterChange}),r.a.createElement($,{ticketsData:a,currencyFilterVal:t})))}}]),t}(r.a.Component);i.a.render(r.a.createElement(G,null),document.getElementById("root"))}],[[15,1,2]]]);
//# sourceMappingURL=main.2899975f.chunk.js.map